{"ast":null,"code":"var _jsxFileName = \"/Users/anatolisaukhin/hw-02/src/s2-homeworks/hw06/common/c4-SuperEditableSpan/SuperEditableSpan.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport s from \"./SuperEditableSpan.module.css\";\nimport SuperInputText from \"../../../hw04/common/c1-SuperInputText/SuperInputText\";\nimport editIcon from \"./editIcon.svg\";\n\n// тип пропсов обычного инпута\n\n// тип пропсов обычного спана\n\n// здесь мы говорим что у нашего инпута будут такие же пропсы как у обычного инпута, кроме type\n// (чтоб не писать value: string, onChange: ...; они уже все описаны в DefaultInputPropsType)\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SuperEditableSpan = ({\n  autoFocus,\n  onBlur,\n  onEnter,\n  spanProps,\n  onChangeText,\n  ...restProps // все остальные пропсы попадут в объект restProps\n}) => {\n  _s();\n  const [editMode, setEditMode] = useState(false);\n  const {\n    children,\n    onDoubleClick,\n    className,\n    defaultText,\n    ...restSpanProps\n  } = spanProps || {};\n  useEffect(() => {\n    setLocalValue(restProps.value || \"\");\n  }, [restProps.value]);\n  const [localValue, setLocalValue] = useState(restProps.value || \"\");\n  const onEnterCallback = () => {\n    // выключить editMode при нажатии Enter // делают студенты\n\n    onEnter === null || onEnter === void 0 ? void 0 : onEnter();\n    setEditMode(false);\n    onChangeText === null || onChangeText === void 0 ? void 0 : onChangeText(localValue || '');\n  };\n  const onBlurCallback = e => {\n    // выключить editMode при нажатии за пределами инпута // делают студенты\n\n    onBlur === null || onBlur === void 0 ? void 0 : onBlur(e);\n    setEditMode(false);\n    // onChangeText?.(restProps.value as string);\n  };\n  const onDoubleClickCallBack = e => {\n    // включить editMode при двойном клике // делают студенты\n\n    onDoubleClick === null || onDoubleClick === void 0 ? void 0 : onDoubleClick(e);\n    setEditMode(true);\n  };\n  const spanClassName = s.span + (className ? \" \" + className : \"\");\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: editMode ? /*#__PURE__*/_jsxDEV(SuperInputText, {\n      autoFocus: autoFocus || true,\n      onBlur: onBlurCallback,\n      onEnter: onEnterCallback,\n      className: s.input,\n      value: restProps.value,\n      ...restProps\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.spanBlock,\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: editIcon,\n        className: s.pen,\n        alt: \"edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        onDoubleClick: onDoubleClickCallBack,\n        className: spanClassName,\n        ...restSpanProps,\n        children: children || restProps.value || defaultText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n_s(SuperEditableSpan, \"Pre6ace0CDlo8x7+ffXY80GxBok=\");\n_c = SuperEditableSpan;\nexport default SuperEditableSpan;\nvar _c;\n$RefreshReg$(_c, \"SuperEditableSpan\");","map":{"version":3,"names":["React","useState","useEffect","s","SuperInputText","editIcon","jsxDEV","_jsxDEV","Fragment","_Fragment","SuperEditableSpan","autoFocus","onBlur","onEnter","spanProps","onChangeText","restProps","_s","editMode","setEditMode","children","onDoubleClick","className","defaultText","restSpanProps","setLocalValue","value","localValue","onEnterCallback","onBlurCallback","e","onDoubleClickCallBack","spanClassName","span","input","fileName","_jsxFileName","lineNumber","columnNumber","spanBlock","src","pen","alt","_c","$RefreshReg$"],"sources":["/Users/anatolisaukhin/hw-02/src/s2-homeworks/hw06/common/c4-SuperEditableSpan/SuperEditableSpan.tsx"],"sourcesContent":["import React, {\n  DetailedHTMLProps,\n  InputHTMLAttributes,\n  HTMLAttributes,\n  useState,\n  KeyboardEvent,\n  useEffect,\n} from \"react\";\nimport s from \"./SuperEditableSpan.module.css\";\nimport SuperInputText from \"../../../hw04/common/c1-SuperInputText/SuperInputText\";\nimport editIcon from \"./editIcon.svg\";\nimport { restoreState, saveState } from \"../../localStorage/localStorage\";\n\n// тип пропсов обычного инпута\ntype DefaultInputPropsType = DetailedHTMLProps<\n  InputHTMLAttributes<HTMLInputElement>,\n  HTMLInputElement\n>;\n// тип пропсов обычного спана\ntype DefaultSpanPropsType = DetailedHTMLProps<\n  HTMLAttributes<HTMLSpanElement>,\n  HTMLSpanElement\n>;\n\n// здесь мы говорим что у нашего инпута будут такие же пропсы как у обычного инпута, кроме type\n// (чтоб не писать value: string, onChange: ...; они уже все описаны в DefaultInputPropsType)\ntype SuperEditableSpanType = Omit<DefaultInputPropsType, \"type\"> & {\n  // и + ещё пропсы которых нет в стандартном инпуте\n  onChangeText?: (value: string) => void;\n  onEnter?: () => void;\n  error?: string;\n  spanProps?: DefaultSpanPropsType & { defaultText?: string }; // пропсы для спана\n};\n\nconst SuperEditableSpan: React.FC<SuperEditableSpanType> = ({\n  autoFocus,\n  onBlur,\n  onEnter,\n  spanProps,\n  onChangeText,\n  \n  ...restProps // все остальные пропсы попадут в объект restProps\n}) => {\n  const [editMode, setEditMode] = useState<boolean>(false);\n  const { children, onDoubleClick, className, defaultText, ...restSpanProps } =\n    spanProps || {};\n\n\n\n    useEffect(() => {\n        setLocalValue(restProps.value || \"\");\n      }, [restProps.value]);\n\n\n    const [localValue, setLocalValue] = useState(restProps.value || \"\");\n\n\n  const onEnterCallback = () => {\n    // выключить editMode при нажатии Enter // делают студенты\n\n    onEnter?.();\n    setEditMode(false);\n    onChangeText?.(localValue || '');\n\n\n  };\n  const onBlurCallback = (e: React.FocusEvent<HTMLInputElement>) => {\n    // выключить editMode при нажатии за пределами инпута // делают студенты\n\n    onBlur?.(e);\n    setEditMode(false);\n    // onChangeText?.(restProps.value as string);\n\n  };\n  const onDoubleClickCallBack = (\n    e: React.MouseEvent<HTMLSpanElement, MouseEvent>\n  ) => {\n    // включить editMode при двойном клике // делают студенты\n\n    onDoubleClick?.(e);\n    setEditMode(true);\n  };\n\n  const spanClassName = s.span + (className ? \" \" + className : \"\");\n\n  return (\n    <>\n      {editMode ? (\n        <SuperInputText\n          autoFocus={autoFocus || true}\n          onBlur={onBlurCallback}\n          onEnter={onEnterCallback}\n          className={s.input}\n          value={restProps.value}\n          {...restProps} // отдаём инпуту остальные пропсы если они есть (value например там внутри)\n        />\n      ) : (\n        <div className={s.spanBlock}>\n          <img src={editIcon} className={s.pen} alt={\"edit\"} />\n          <span\n            onDoubleClick={onDoubleClickCallBack}\n            className={spanClassName}\n            {...restSpanProps}\n          >\n            {/*если нет захардкодженного текста для спана, то значение инпута*/}\n\n            {children || restProps.value || defaultText}\n            {/* { restProps.value  ? restProps.value  : defaultText} */}\n            {/* { defaultText  ? defaultText : restProps.value } */}\n          </span>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default SuperEditableSpan;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}