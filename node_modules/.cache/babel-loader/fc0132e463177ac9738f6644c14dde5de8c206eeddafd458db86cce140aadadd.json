{"ast":null,"code":"import React,{useState}from\"react\";import s2 from\"../../s1-main/App.module.css\";import s from\"./HW13.module.css\";import SuperButton from\"../hw04/common/c2-SuperButton/SuperButton\";import axios from\"axios\";import success200 from\"./images/200.svg\";import error400 from\"./images/400.svg\";import error500 from\"./images/500.svg\";import errorUnknown from\"./images/error.svg\";/*\n * 1 - дописать функцию send\n * 2 - дизэйблить кнопки пока идёт запрос\n * 3 - сделать стили в соответствии с дизайном\n * */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HW13=()=>{const[code,setCode]=useState(\"\");const[text,setText]=useState(\"\");const[info,setInfo]=useState(\"\");const[image,setImage]=useState(\"\");const[loading,setLoading]=useState(false);const send=x=>()=>{const url=x===null?\"https://xxxxxx.ccc\"// имитация запроса на не корректный адрес\n:\"https://samurai.it-incubator.io/api/3.0/homework/test\";setCode(\"\");setImage(\"\");// setText(\"\");\nsetInfo(\"...loading\");setLoading(true);axios.post(url,{success:x}).then(res=>{setCode(\"Код 200!\");setImage(success200);console.log(res);setText(res.data.errorText);// дописать\nsetInfo(res.data.info);}).catch(e=>{// дописать\nif(axios.isAxiosError(e)){const resp=e.response;const status=resp.status;const data=resp.data;if(status===400){setImage(error400);setCode(\"Ошибка\"+String(status));setText(data.errorText);setInfo(data.info);}else if(status===500){setImage(error500);setCode(\"Ошибка\"+String(status));setText(data.errorText);setInfo(data.info);}else{setImage(errorUnknown);setCode(\"Error\");setText(e.message);setInfo(e.name);}}}).finally(()=>setLoading(false));};return/*#__PURE__*/_jsxs(\"div\",{id:\"hw13\",children:[/*#__PURE__*/_jsx(\"div\",{className:s2.hwTitle,children:\"Homework #13\"}),/*#__PURE__*/_jsxs(\"div\",{className:s2.hw,children:[/*#__PURE__*/_jsxs(\"div\",{className:s.buttonsContainer,children:[/*#__PURE__*/_jsx(SuperButton,{id:\"hw13-send-true\",onClick:send(true),xType:\"secondary\"// дописать\n,disabled:loading,children:\"Send true\"}),/*#__PURE__*/_jsx(SuperButton,{id:\"hw13-send-false\",onClick:send(false),xType:\"secondary\"// дописать\n,disabled:loading,children:\"Send false\"}),/*#__PURE__*/_jsx(SuperButton,{id:\"hw13-send-undefined\",onClick:send(undefined),xType:\"secondary\"// дописать\n,disabled:loading,children:\"Send undefined\"}),/*#__PURE__*/_jsx(SuperButton,{id:\"hw13-send-null\",onClick:send(null)// имитация запроса на не корректный адрес\n,xType:\"secondary\"// дописать\n,disabled:loading,children:\"Send null\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:s.responseContainer,children:[/*#__PURE__*/_jsx(\"div\",{className:s.imageContainer,children:image&&/*#__PURE__*/_jsx(\"img\",{src:image,className:s.image,alt:\"status\"})}),/*#__PURE__*/_jsxs(\"div\",{className:s.textContainer,children:[/*#__PURE__*/_jsx(\"div\",{id:\"hw13-code\",className:s.code,children:code}),/*#__PURE__*/_jsx(\"div\",{id:\"hw13-text\",className:s.text,children:text}),/*#__PURE__*/_jsx(\"div\",{id:\"hw13-info\",className:s.info,children:info})]})]})]})]});};export default HW13;","map":{"version":3,"names":["React","useState","s2","s","SuperButton","axios","success200","error400","error500","errorUnknown","jsx","_jsx","jsxs","_jsxs","HW13","code","setCode","text","setText","info","setInfo","image","setImage","loading","setLoading","send","x","url","post","success","then","res","console","log","data","errorText","catch","e","isAxiosError","resp","response","status","String","message","name","finally","id","children","className","hwTitle","hw","buttonsContainer","onClick","xType","disabled","undefined","responseContainer","imageContainer","src","alt","textContainer"],"sources":["/Users/anatolisaukhin/hw-02/src/s2-homeworks/hw13/HW13.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport s2 from \"../../s1-main/App.module.css\";\nimport s from \"./HW13.module.css\";\nimport SuperButton from \"../hw04/common/c2-SuperButton/SuperButton\";\nimport axios, { AxiosResponse } from \"axios\";\nimport success200 from \"./images/200.svg\";\nimport error400 from \"./images/400.svg\";\nimport error500 from \"./images/500.svg\";\nimport errorUnknown from \"./images/error.svg\";\n\n/*\n * 1 - дописать функцию send\n * 2 - дизэйблить кнопки пока идёт запрос\n * 3 - сделать стили в соответствии с дизайном\n * */\n\ntype ErrorResponse = { errorText: string; info: string };\n\nconst HW13 = () => {\n  const [code, setCode] = useState(\"\");\n  const [text, setText] = useState(\"\");\n  const [info, setInfo] = useState(\"\");\n  const [image, setImage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const send = (x?: boolean | null) => () => {\n    const url =\n      x === null\n        ? \"https://xxxxxx.ccc\" // имитация запроса на не корректный адрес\n        : \"https://samurai.it-incubator.io/api/3.0/homework/test\";\n\n    setCode(\"\");\n    setImage(\"\");\n    // setText(\"\");\n    setInfo(\"...loading\");\n    setLoading(true);\n\n    axios\n      .post(url, { success: x })\n      .then((res) => {\n        setCode(\"Код 200!\");\n        setImage(success200);\n        console.log(res)\n        setText(res.data.errorText);\n\n        // дописать\n        setInfo(res.data.info);\n      })\n      .catch((e: unknown) => {\n        // дописать\n        if (axios.isAxiosError(e)) {\n          const resp = e.response as AxiosResponse<ErrorResponse>;\n          const status = resp.status;\n          const data = resp.data;\n\n          if (status === 400) {\n            setImage(error400);\n            setCode(\"Ошибка\" + String(status));\n            setText(data.errorText);\n            setInfo(data.info);\n          } else if (status === 500) {\n            setImage(error500);\n            setCode(\"Ошибка\" + String(status));\n            setText(data.errorText);\n            setInfo(data.info);\n          } else {\n            setImage(errorUnknown);\n            setCode(\"Error\");\n            setText(e.message);\n            setInfo(e.name);\n          }\n        }\n      })\n      .finally(() => setLoading(false));\n  };\n\n  return (\n    <div id={\"hw13\"}>\n      <div className={s2.hwTitle}>Homework #13</div>\n\n      <div className={s2.hw}>\n        <div className={s.buttonsContainer}>\n          <SuperButton\n            id={\"hw13-send-true\"}\n            onClick={send(true)}\n            xType={\"secondary\"}\n            // дописать\n            disabled={loading}\n          >\n            Send true\n          </SuperButton>\n          <SuperButton\n            id={\"hw13-send-false\"}\n            onClick={send(false)}\n            xType={\"secondary\"}\n            // дописать\n            disabled={loading}\n          >\n            Send false\n          </SuperButton>\n          <SuperButton\n            id={\"hw13-send-undefined\"}\n            onClick={send(undefined)}\n            xType={\"secondary\"}\n            // дописать\n            disabled={loading}\n          >\n            Send undefined\n          </SuperButton>\n          <SuperButton\n            id={\"hw13-send-null\"}\n            onClick={send(null)} // имитация запроса на не корректный адрес\n            xType={\"secondary\"}\n            // дописать\n            disabled={loading}\n          >\n            Send null\n          </SuperButton>\n        </div>\n\n        <div className={s.responseContainer}>\n          <div className={s.imageContainer}>\n            {image && <img src={image} className={s.image} alt=\"status\" />}\n          </div>\n\n          <div className={s.textContainer}>\n            <div id={\"hw13-code\"} className={s.code}>\n              {code}\n            </div>\n            <div id={\"hw13-text\"} className={s.text}>\n              {text}\n            </div>\n            <div id={\"hw13-info\"} className={s.info}>\n              {info}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default HW13;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}