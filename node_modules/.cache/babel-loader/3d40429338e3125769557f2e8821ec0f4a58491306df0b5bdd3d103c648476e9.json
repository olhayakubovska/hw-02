{"ast":null,"code":"var _jsxFileName = \"/Users/anatolisaukhin/hw-02/src/s2-homeworks/hw14/HW14.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport s2 from \"../../s1-main/App.module.css\";\nimport s from \"./HW14.module.css\";\nimport axios from \"axios\";\nimport SuperDebouncedInput from \"./common/c8-SuperDebouncedInput/SuperDebouncedInput\";\nimport { useSearchParams } from \"react-router-dom\";\n\n/*\n * 1 - дописать функцию onChangeTextCallback в SuperDebouncedInput\n * 2 - дописать функцию sendQuery в HW14\n * 3 - дописать функцию onChangeText в HW14\n * 4 - сделать стили в соответствии с дизайном\n * 5 - добавить HW14 в HW5/pages/JuniorPlus\n * */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getTechs = find => {\n  return axios.get(\"https://samurai.it-incubator.io/api/3.0/homework/test2\", {\n    params: {\n      find\n    }\n  }).catch(e => {\n    var _e$response, _e$response$data;\n    alert(((_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.errorText) || e.message);\n  });\n};\nconst HW14 = () => {\n  _s();\n  const [find, setFind] = useState(\"\");\n  const [isLoading, setLoading] = useState(false);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [techs, setTechs] = useState([]);\n  const sendQuery = value => {\n    setLoading(true);\n    // console.log(\"1500\");\n    getTechs(value).then(res => {\n      if (res) {\n        setTechs(res.data.techs);\n      }\n      // делает студент\n      // сохранить пришедшие данные\n      //\n      setLoading(false);\n    }).finally();\n  };\n  const onChangeText = value => {\n    setFind(value);\n    // делает студент\n\n    // добавить/заменить значение в квери урла\n    // setSearchParams(\n\n    const params = new URLSearchParams();\n    if (value) {\n      // если строка не пустая — добавляем/обновляем параметр ?find=\n      params.set(\"find\", value);\n    } else {\n      //если пусто — удаляем параметр из URL, чтобы не было ?find=\n      params.delete(\"find\");\n    }\n    setSearchParams(params, {\n      replace: true\n    });\n\n    //\n  };\n  // console.log(searchParams, \"!!searchParams!!!\", find, \"!!find!!\");\n\n  useEffect(() => {\n    const params = Object.fromEntries(searchParams);\n    sendQuery(params.find || \"\");\n    setFind(params.find || \"\");\n  }, []);\n  const mappedTechs = techs.map(t => /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"hw14-tech-\" + t,\n    className: s.tech,\n    children: t\n  }, t, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"hw14\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: s2.hwTitle,\n      children: \"Homework #14\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s2.hw,\n      children: [/*#__PURE__*/_jsxDEV(SuperDebouncedInput, {\n        id: \"hw14-super-debounced-input\",\n        value: find,\n        onChangeText: onChangeText,\n        onDebouncedChange: sendQuery\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"hw14-loading\",\n        className: s.loading,\n        children: isLoading ? \"...ищем\" : /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 36\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), mappedTechs]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n_s(HW14, \"c89xmd6k1aXYJR37hmrXbXaZ59A=\", false, function () {\n  return [useSearchParams];\n});\n_c = HW14;\nexport default HW14;\nvar _c;\n$RefreshReg$(_c, \"HW14\");","map":{"version":3,"names":["React","useEffect","useState","s2","s","axios","SuperDebouncedInput","useSearchParams","jsxDEV","_jsxDEV","getTechs","find","get","params","catch","e","_e$response","_e$response$data","alert","response","data","errorText","message","HW14","_s","setFind","isLoading","setLoading","searchParams","setSearchParams","techs","setTechs","sendQuery","value","then","res","finally","onChangeText","URLSearchParams","set","delete","replace","Object","fromEntries","mappedTechs","map","t","id","className","tech","children","fileName","_jsxFileName","lineNumber","columnNumber","hwTitle","hw","onDebouncedChange","loading","_c","$RefreshReg$"],"sources":["/Users/anatolisaukhin/hw-02/src/s2-homeworks/hw14/HW14.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport s2 from \"../../s1-main/App.module.css\";\nimport s from \"./HW14.module.css\";\nimport axios from \"axios\";\nimport SuperDebouncedInput from \"./common/c8-SuperDebouncedInput/SuperDebouncedInput\";\nimport { useSearchParams } from \"react-router-dom\";\n\n/*\n * 1 - дописать функцию onChangeTextCallback в SuperDebouncedInput\n * 2 - дописать функцию sendQuery в HW14\n * 3 - дописать функцию onChangeText в HW14\n * 4 - сделать стили в соответствии с дизайном\n * 5 - добавить HW14 в HW5/pages/JuniorPlus\n * */\n\nconst getTechs = (find: string) => {\n  return axios\n    .get<{ techs: string[] }>(\n      \"https://samurai.it-incubator.io/api/3.0/homework/test2\",\n      { params: { find } }\n    )\n    .catch((e) => {\n      alert(e.response?.data?.errorText || e.message);\n    });\n};\n\nconst HW14 = () => {\n  const [find, setFind] = useState(\"\");\n  const [isLoading, setLoading] = useState(false);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [techs, setTechs] = useState<string[]>([]);\n\n  const sendQuery = (value: string) => {\n    setLoading(true);\n    // console.log(\"1500\");\n    getTechs(value).then((res) => {\n      if (res) {\n        setTechs(res.data.techs);\n      }\n      // делает студент\n      // сохранить пришедшие данные\n      //\n      setLoading(false);\n    }).finally();\n  };\n\n  const onChangeText = (value: string) => {\n    setFind(value);\n    // делает студент\n\n    // добавить/заменить значение в квери урла\n    // setSearchParams(\n\n    const params = new URLSearchParams();\n    if (value) {\n      // если строка не пустая — добавляем/обновляем параметр ?find=\n      params.set(\"find\", value);\n    } else {\n      //если пусто — удаляем параметр из URL, чтобы не было ?find=\n      params.delete(\"find\");\n    }\n    setSearchParams(params, { replace: true });\n\n    //\n  };\n  // console.log(searchParams, \"!!searchParams!!!\", find, \"!!find!!\");\n\n  useEffect(() => {\n    const params = Object.fromEntries(searchParams);\n    sendQuery(params.find || \"\");\n    setFind(params.find || \"\");\n  }, []);\n\n  const mappedTechs = techs.map((t) => (\n    <div key={t} id={\"hw14-tech-\" + t} className={s.tech}>\n      {t}\n    </div>\n  ));\n\n  return (\n    <div id={\"hw14\"}>\n      <div className={s2.hwTitle}>Homework #14</div>\n\n      <div className={s2.hw}>\n        <SuperDebouncedInput\n          id={\"hw14-super-debounced-input\"}\n          value={find}\n          onChangeText={onChangeText}\n          onDebouncedChange={sendQuery}\n        />\n\n        <div id={\"hw14-loading\"} className={s.loading}>\n          {isLoading ? \"...ищем\" : <br />}\n        </div>\n\n        {mappedTechs}\n      </div>\n    </div>\n  );\n};\n\nexport default HW14;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}